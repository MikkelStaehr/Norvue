{{ 'section-hero-norvue.css' | asset_url | stylesheet_tag }}

<div class="hero-norvue color-{{ section.settings.color_scheme }}">
  {%- if section.settings.image != blank -%}
    <div class="hero-norvue__image-container">
      <img
        srcset="
          {%- if section.settings.image.width >= 375 -%}{{ section.settings.image | image_url: width: 375 }} 375w,{%- endif -%}
          {%- if section.settings.image.width >= 750 -%}{{ section.settings.image | image_url: width: 750 }} 750w,{%- endif -%}
          {%- if section.settings.image.width >= 1100 -%}{{ section.settings.image | image_url: width: 1100 }} 1100w,{%- endif -%}
          {%- if section.settings.image.width >= 1500 -%}{{ section.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
          {%- if section.settings.image.width >= 2200 -%}{{ section.settings.image | image_url: width: 2200 }} 2200w,{%- endif -%}
          {%- if section.settings.image.width >= 3000 -%}{{ section.settings.image | image_url: width: 3000 }} 3000w,{%- endif -%}
          {{ section.settings.image | image_url }} {{ section.settings.image.width }}w
        "
        sizes="100vw"
        src="{{ section.settings.image | image_url: width: 1500 }}"
        loading="eager"
        fetchpriority="high"
        alt="{{ section.settings.image.alt | escape }}"
        width="{{ section.settings.image.width }}"
        height="{{ section.settings.image.height }}"
        class="hero-norvue__image"
      >
    </div>
    {%- if section.settings.image_overlay -%}
      <div
        class="hero-norvue__overlay"
        style="opacity: {{ section.settings.image_overlay_opacity | divided_by: 100.0 }};"
      ></div>
    {%- endif -%}
  {%- endif -%}

  <div class="hero-norvue__content-container">
    <div class="hero-norvue__content">
      {%- if section.settings.heading != blank -%}
        <h1 class="hero-norvue__heading animate-element">{{ section.settings.heading }}</h1>
      {%- endif -%}

      {%- if section.settings.subheading != blank -%}
        <div class="hero-norvue__subheading animate-element">{{ section.settings.subheading }}</div>
      {%- endif -%}

      {%- if section.settings.button_label != blank -%}
        <div class="hero-norvue__button-wrapper animate-element">
          <a
            href="{{ section.settings.button_link }}"
            class="hero-norvue__button button{% if section.settings.button_style_secondary %} button--secondary{% else %} button--primary{% endif %}"
          >
            {{ section.settings.button_label | escape }}
          </a>
        </div>
      {%- endif -%}
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Observer til fade-in animation
    const animatedElements = document.querySelectorAll('.animate-element');

    // Sæt initial styling (usynlig)
    animatedElements.forEach((element) => {
      element.style.opacity = '0';
      element.style.transform = 'translateY(30px)';
    });

    // Staggered delay for animation (så elementerne animerer ind efter hinanden)
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry, index) => {
          if (entry.isIntersecting) {
            setTimeout(() => {
              entry.target.style.opacity = '1';
              entry.target.style.transform = 'translateY(0)';
            }, index * 250); // 250ms mellem hvert element

            observer.unobserve(entry.target);
          }
        });
      },
      {
        threshold: 0.1,
      }
    );

    // Observer alle animerede elementer
    animatedElements.forEach((element) => {
      observer.observe(element);
    });
  });
</script>

{% schema %}
{
  "name": "Hero banner",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Baggrundsbillede"
    },
    {
      "type": "checkbox",
      "id": "image_overlay",
      "label": "Tilføj mørk overlay",
      "default": true,
      "info": "Hjælper med at gøre tekst mere læsbar på lyse billeder"
    },
    {
      "type": "range",
      "id": "image_overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Opacity på overlay",
      "default": 40
    },
    {
      "type": "text",
      "id": "heading",
      "default": "Din overskrift her",
      "label": "Overskrift"
    },
    {
      "type": "richtext",
      "id": "subheading",
      "default": "<p>Fortæl lidt om din brand her. Kort og præcist. Lad denne tekst forklare hvad der gør din webshop unik.</p>",
      "label": "Undertekst"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Shop nu",
      "label": "Knap tekst"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Knap link"
    },
    {
      "type": "checkbox",
      "id": "button_style_secondary",
      "default": false,
      "label": "Brug sekundær knap-stil"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Farveskema",
      "default": "scheme-1"
    }
  ],
  "presets": [
    {
      "name": "NORVUE Hero",
      "category": "Hero"
    }
  ]
}
{% endschema %}

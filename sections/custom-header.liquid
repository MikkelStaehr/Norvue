{{ 'custom-header.css' | asset_url | stylesheet_tag }}
<script src="{{ 'custom-header.js' | asset_url }}" defer="defer"></script>

<header class="custom-header">
  <div class="custom-header__container">
    <div class="custom-header__logo">
      <a href="/">
        {%- if section.settings.logo != blank -%}
          {{ section.settings.logo | image_url: width: section.settings.logo_width | image_tag:
            class: 'custom-header__logo-image',
            widths: '50, 100, 150, 200, 250, 300',
            height: section.settings.logo.height,
            width: section.settings.logo_width,
            alt: section.settings.logo.alt | default: shop.name
          }}
        {%- else -%}
          <span class="custom-header__logo-text">{{ shop.name }}</span>
        {%- endif -%}
      </a>
    </div>

    <nav class="custom-header__nav">
      {%- if section.settings.menu != blank -%}
        <ul class="custom-header__menu">
          {%- for link in section.settings.menu.links -%}
            <li class="custom-header__menu-item{% if link.links.size > 0 %} has-submenu{% endif %}">
              <a href="{{ link.url }}" class="custom-header__menu-link">{{ link.title }}</a>
              {%- if link.links.size > 0 -%}
                <ul class="custom-header__submenu">
                  {%- for childlink in link.links -%}
                    <li class="custom-header__submenu-item">
                      <a href="{{ childlink.url }}" class="custom-header__submenu-link">{{ childlink.title }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </li>
          {%- endfor -%}
        </ul>
      {%- endif -%}
    </nav>

    <button class="custom-header__mobile-toggle" aria-expanded="false" aria-controls="mobile-menu">
      <span class="custom-header__mobile-toggle-bar"></span>
      <span class="custom-header__mobile-toggle-bar"></span>
      <span class="custom-header__mobile-toggle-bar"></span>
    </button>
  </div>

  <div class="custom-header__mobile-menu" id="mobile-menu">
    {%- if section.settings.menu != blank -%}
      <ul class="custom-header__mobile-menu-list">
        {%- for link in section.settings.menu.links -%}
          <li class="custom-header__mobile-menu-item">
            <a href="{{ link.url }}" class="custom-header__mobile-menu-link">{{ link.title }}</a>
            {%- if link.links.size > 0 -%}
              <button class="custom-header__mobile-submenu-toggle">+</button>
              <ul class="custom-header__mobile-submenu">
                {%- for childlink in link.links -%}
                  <li class="custom-header__mobile-submenu-item">
                    <a href="{{ childlink.url }}" class="custom-header__mobile-submenu-link">{{ childlink.title }}</a>
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </li>
        {%- endfor -%}
      </ul>
    {%- endif -%}
  </div>
</header>

{% schema %}
{
  "name": "Custom Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 5,
      "default": 100,
      "unit": "px",
      "label": "Logo bredde"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Navigation",
      "default": "main-menu"
    }
  ],
  "presets": [
    {
      "name": "Custom Header",
      "settings": {}
    }
  ]
}
{% endschema %} 